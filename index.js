(()=>{"use strict";var e={524:(e,t,r)=>{r.d(t,{Z:()=>p});var n=r(81),a=r.n(n),i=r(645),o=r.n(i),s=r(667),c=r.n(s),l=new URL(r(350),r.b),d=o()(a()),u=c()(l);d.push([e.id,"html {\n    font-size: 10px;\n    color:rgb(42, 42, 42);\n}\n\nbody {\n    background: rgb(249, 249, 253);\n}\n\n.logo {\n    width: 100px;\n    height: 37px;\n    background-image: url("+u+');\n    background-repeat: no-repeat;\n}\n\nfooter {\n    height: 10em;\n    margin-top: 3em;\n    display: flex;\n    align-items: center;\n    flex-wrap: wrap;\n    justify-content: space-around;\n}\nfooter .copyright {\n    font-size: 14px;\n    color: #333;\n    text-align: center;\n}\nfooter .copyright a {\n    color: #444;\n}\nfooter .copyright a:hover {\n    color: #555;\n}\nfooter .copyright:before {\n    content: \'©\';\n}\n\n\n.products {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 2rem;\n    font-size: 1.8rem;\n    line-height: 130%;\n    align-content: flex-start;\n\n    grid-area: products;\n}\n\n.product {\n    width: 33rem;\n    border: #eee 1px solid;\n    padding: 1.5rem 2rem;\n    box-shadow: 1px 0px 10px -5px rgb(34 60 80 / 20%);\n    background-color: #fff;\n}\n\n.product__image {\n    width: 150px;\n}\n\n.product__property {\n    color: rgb(130, 130, 130);\n}\n\n.product__name {\n    color:rgb(24, 35, 51);\n    font-weight: bold;\n    padding-bottom: 1rem;\n    font-size: 2rem;\n}\n\n.product__footer, .product__header {\n    display: flex;\n    justify-content: space-between;\n}\n\n.product__footer {\n    padding-top: 1rem;\n    align-items: center;\n}\n\n.button {\n    outline: none;\n    border-radius: 500px;\n    transition-property: background-color, color;\n    transition-duration: .3s;\n    border: 1px solid transparent;\n    text-transform: uppercase;\n    text-align: center;\n    padding: 1.1rem 3rem 1rem;\n    color: #3a7e52;\n    box-shadow: inset 0 0 0 1px #3a7e52;\n    background-color: transparent;\n    max-height: 4.2rem;\n}\n\n.button:hover {\n    color: #fff;\n    background-color: #3a7e52;\n}\n\n\n.secondary-button {\n    outline: none;\n    border-radius: 500px;\n    transition-property: background-color, color;\n    transition-duration: .3s;\n    border: 1px solid transparent;\n    text-align: center;\n    padding: 1.1rem 2rem 1rem;\n    color: #494949;\n    box-shadow: inset 0 0 0 1px #86afad;\n    background-color: transparent;\n    font-size: 1.4rem;\n    max-height: 4.2rem;\n}\n\n.secondary-button:hover {\n    color: #fff;\n    background-color: #86afad;\n}\n\n\n\nmain {\n    display: grid;\n    grid-template-areas: "filters actions"\n                        "filters  products";\n    grid-template-columns: 20rem 1fr;\n    column-gap: 7rem;\n    row-gap: 2rem;\n}\n\n.filters, .filters__controls {\n    padding: 2rem;\n    display: flex;\n    flex-direction: column;\n    gap: 3rem;\n    font-size: 1.6rem;\n    min-width: 20rem;\n\n    grid-area: filters;\n}\n\n.group__name {\n    margin-bottom: 1rem;\n    font-weight: bold;\n}\n\nheader {\n    display: flex;\n    justify-content: space-between;\n    padding: 1rem;\n    margin-bottom: 2rem;\n    border-bottom: 2px solid #c1d8c9;\n    align-items: center;\n\n    position: sticky;\n    top: 0px;\n    background: rgb(249, 249, 253);\n    z-index: 100;\n}\n\nh1 {\n    color: #3a7e52;\n    text-transform: uppercase;\n    letter-spacing: 0.1rem;\n}\n\n.slider-wrapper {\n    position: relative;\n}\n\n.range {\n    position: absolute;\n\n    appearance: none;\n    pointer-events: none;\n    background: transparent;\n    border: 1px solid #3a7e52;\n    border-radius: 8px;\n    height: 6px;\n    width: 100%;\n}\n\n.range::-webkit-slider-thumb {\n    -webkit-appearance: none;\n    pointer-events: all;\n    width: 16px;\n    height: 16px;\n    background-color: #3a7e52;\n    border-radius: 50%;\n    cursor: pointer;\n}\n\n.accented-text, a {\n    font-weight: normal;\n    color:#3c8f5a;\n}\n\nlabel {\n    text-transform: capitalize;\n}\n\ninput, label, button {\n    cursor: pointer;\n}\n\n.incart {\n    outline: medium dashed #3c8f5a;\n\n}\n\n.pop-up {\n    display: none;\n    background-color: rgb(255, 246, 201);\n    position: absolute;\n    top: 6rem;\n    right: 1rem;\n    padding: 1rem 2rem;\n    border-radius: 5px;\n    border: 2px solid #d6a02d;\n    box-shadow: 3px 3px 10px rgb(51 63 56 / 27%);\n    font-size: 1.8rem;\n    cursor: pointer;\n    width: 35rem;\n}\n\n@keyframes warning-on {\n    0% {opacity: 0;}\n    100% {opacity: 1;}\n}\n\n.cart {\n    font-size: 1.8rem;\n    color:#3c8f5a;\n}\n\n.actions {\n    grid-area: actions;\n    display: flex;\n    flex-wrap: wrap;\n    gap: 2rem;\n}\n\n.search-message {\n    min-height: 2rem;\n    font-size: 1.8rem;\n    padding: 1rem 0;\n}\n\n.search, .sort {\n    width: 20rem;\n    border: 1px solid #3a7e52;\n    padding: 1rem;\n    height: 4rem;\n    border-radius: 0.5rem;\n    outline: none;\n    color: #3a7e52;\n}\n',""]);const p=d},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r="",n=void 0!==t[5];return t[4]&&(r+="@supports (".concat(t[4],") {")),t[2]&&(r+="@media ".concat(t[2]," {")),n&&(r+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),r+=e(t),n&&(r+="}"),t[2]&&(r+="}"),t[4]&&(r+="}"),r})).join("")},t.i=function(e,r,n,a,i){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(n)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(o[c]=!0)}for(var l=0;l<e.length;l++){var d=[].concat(e[l]);n&&o[d[0]]||(void 0!==i&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=i),r&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=r):d[2]=r),a&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=a):d[4]="".concat(a)),t.push(d))}},t}},667:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},81:e=>{e.exports=function(e){return e[1]}},379:e=>{var t=[];function r(e){for(var r=-1,n=0;n<t.length;n++)if(t[n].identifier===e){r=n;break}return r}function n(e,n){for(var i={},o=[],s=0;s<e.length;s++){var c=e[s],l=n.base?c[0]+n.base:c[0],d=i[l]||0,u="".concat(l," ").concat(d);i[l]=d+1;var p=r(u),h={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)t[p].references++,t[p].updater(h);else{var m=a(h,n);n.byIndex=s,t.splice(s,0,{identifier:u,updater:m,references:1})}o.push(u)}return o}function a(e,t){var r=t.domAPI(t);return r.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;r.update(e=t)}else r.remove()}}e.exports=function(e,a){var i=n(e=e||[],a=a||{});return function(e){e=e||[];for(var o=0;o<i.length;o++){var s=r(i[o]);t[s].references--}for(var c=n(e,a),l=0;l<i.length;l++){var d=r(i[l]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}i=c}}},569:e=>{var t={};e.exports=function(e,r){var n=function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(r)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,r)=>{e.exports=function(e){var t=r.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(r){!function(e,t,r){var n="";r.supports&&(n+="@supports (".concat(r.supports,") {")),r.media&&(n+="@media ".concat(r.media," {"));var a=void 0!==r.layer;a&&(n+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),n+=r.css,a&&(n+="}"),r.media&&(n+="}"),r.supports&&(n+="}");var i=r.sourceMap;i&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,r)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},350:(e,t,r)=>{e.exports=r.p+"ad178c0df28bc133be34.svg"}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var i=t[n]={id:n,exports:{}};return e[n](i,i.exports,r),i.exports}r.m=e,r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;r.g.importScripts&&(e=r.g.location+"");var t=r.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e})(),r.b=document.baseURI||self.location.href,r.nc=void 0;var n={};(()=>{r.d(n,{l:()=>R});var e=r(379),t=r.n(e),a=r(795),i=r.n(a),o=r(569),s=r.n(o),c=r(565),l=r.n(c),d=r(216),u=r.n(d),p=r(589),h=r.n(p),m=r(524),f={};f.styleTagTransform=h(),f.setAttributes=l(),f.insert=s().bind(null,"head"),f.domAPI=i(),f.insertStyleElement=u(),t()(m.Z,f),m.Z&&m.Z.locals&&m.Z.locals;class b{constructor(){this.appName="Smart Bands Store",this.totalResetButton=document.createElement("button"),this.totalResetButton.setAttribute("class","button"),this.totalResetButton.setAttribute("id","total-reset"),this.totalResetButton.innerText="Total Reset",this.footer='\n\n        <div class="copyright">2022</div>\n            <a href="https://rs.school/js/"> <div class="logo"></div></a>\n            <a href="https://github.com/022022">My GitHub</a>\n\n    '}renderWholePage(e,t,r,n,a){document.querySelector("body").innerHTML="";const i=document.createElement("header");i.innerHTML=`<h1> ${this.appName} </h1>`,i.append(r),i.append(this.totalResetButton);const o=document.createElement("footer");o.innerHTML=this.footer;const s=document.createElement("div");s.setAttribute("class","actions"),s.append(n),s.append(a);const c=document.createElement("main");c.append(e,s,t),document.body.append(i,c,o)}listenTotalReset(e){this.totalResetButton.addEventListener("click",(()=>e()))}}class g{constructor(e,t,r){this.handleCart=e=>{const[t,r]=e.split("-");"add"===t&&(this.cartQuantity<20?(this.cartModel.addToCart(r),this.newRender()):this.cartView.showModal()),"remove"===t&&(this.cartModel.removeFromCart(r),this.newRender())},this.cartModel=e,this.cartQuantity=this.cartModel.quantity,this.inCart=this.cartModel.inCart,this.cartView=t,this.cartHTML=this.cartView.cartHTML,this.cartView.createCart(this.cartQuantity),this.app=r}addCartListeners(){this.cartView.listenAddToCart(this.handleCart)}newRender(){this.app()}}class v{constructor(e,t,r,n){this.handleSearch=e=>{this.pageModel.searchWord=e.toLowerCase(),this.pageController.renderAppPage()},this.pageModel=t,this.pageController=n,this.searchView=r,this.searchView.renderSearch(e),this.searchHTML=this.searchView.searchHTML,this.searchView.listenSearch(this.handleSearch)}setFocus(){this.searchView.setFocus()}}class x{constructor(e,t,r){this.handleSort=e=>{this.sortModel.update(e),this.pageController.renderAppPage()},this.sortModel=e,this.sortOrder=this.sortModel.sortOrder,this.sortView=t,this.sortView.renderSorting(this.sortOrder),this.sortHTML=this.sortView.sortHTML,this.sortView.listenSort(this.handleSort),this.pageController=r}}class w{constructor(e,t,r){this.handleFilters=(e,t)=>{for(const r of this.filters)for(const n of r.filters)if(n.id===e)switch(n.filterType){case"checkbox":"off"===n.state?n.state="on":n.state="off";break;case"range":[n.filterAttrs.valueFrom,n.filterAttrs.valueTo]=t.split("-")}this.filtersModel.filters=this.filters,this.filtersModel.saveToLocalStorage(),this.newRender()},this.resetFilters=()=>{this.filtersModel.removeFromLocalStorage(),this.newRender()},this.filtersModel=e,this.filtersView=t,this.app=r,this.filters=this.filtersModel.filters,this.filtersHTML=this.filtersView.render(this.filters),this.filtersView.listenFilters(this.handleFilters),this.filtersView.listenResetFilters(this.resetFilters)}newRender(){this.app()}}class y{constructor(e,t){this.productsModel=e,this.products=this.productsModel.products,this.productsView=t}arrangeProducts(e,t,r,n,a){const i=[],o=[];for(const t of e){const e=[];for(const r of t.filters)switch(r.filterType){case"checkbox":if("on"===r.state){const[t,n]=r.id.split("-"),a={[t.toLowerCase()]:n.toLowerCase()};e.push(a)}break;case"range":o.push([r.id,r.filterAttrs.valueFrom,r.filterAttrs.valueTo])}i.push(e)}let s=t;for(const e of i){if(0===e.length)continue;const t=s.filter((t=>{for(const r of e)if(t[Object.keys(r)[0]]===Object.values(r)[0])return!0}));s=t}let c=s;for(const e of o){const t=c.filter((t=>{const[r,n,a]=e;if(r){const e=Number(t[r]);if(e>=Number(n)&&e<=Number(a))return!0}}));c=t}if(c.forEach((e=>{r.includes(e.id)?e.incart="yes":e.incart="no"})),a){const e=c.filter((e=>e.name.toLowerCase().includes(a)));c=e}switch(n){case"name-a":c.sort(((e,t)=>e.name<t.name?-1:e.name>t.name?1:0));break;case"name-z":c.sort(((e,t)=>t.name<e.name?-1:t.name>e.name?1:0));break;case"released-new":c.sort(((e,t)=>Number(t.released)-Number(e.released)));break;case"released-old":c.sort(((e,t)=>Number(e.released)-Number(t.released)))}return c}getHTML(e){return this.productsView.render(e),this.productsView.productsHTML}}class k{constructor(){this.cartHTML=document.createElement("div"),this.warning=document.createElement("div")}createCart(e){this.cartHTML.setAttribute("class","cart");const t=document.createElement("div");t.setAttribute("class","cart-stats"),t.innerHTML=`${e} items in Cart`,this.warning.setAttribute("class","pop-up"),this.warning.innerHTML="Sorry, you have added maximum (20 products). Click to close",this.cartHTML.append(t),this.cartHTML.append(this.warning)}listenAddToCart(e){const t=document.querySelector(".products");t&&t.addEventListener("click",(t=>{if("BUTTON"===t.target.tagName){const r=t.target.id;e(r)}}))}showModal(){this.warning.style.display="block",this.warning.style.animation="warning-on 0.5s",this.warning.addEventListener("click",(()=>this.warning.style.display="none"))}}class T{constructor(){const e=localStorage.getItem("app-cart");e?(this.inCart=JSON.parse(e),this.quantity=this.inCart.length):(this.quantity=0,this.inCart=[],localStorage.setItem("app-cart",JSON.stringify(this.inCart)))}addToCart(e){const t=localStorage.getItem("app-cart");if(t){const r=JSON.parse(t);r.push(e),localStorage.setItem("app-cart",JSON.stringify(r))}}removeFromCart(e){const t=localStorage.getItem("app-cart");if(t){const r=JSON.parse(t).filter((t=>t!==e));localStorage.setItem("app-cart",JSON.stringify(r))}}}const M=[{filtersGroupName:"Released",filters:[{filterType:"range",id:"released",state:"2021",filterAttrs:{min:"2016",step:"1",max:"2021",valueFrom:"2016",valueTo:"2021"}}]},{filtersGroupName:"In Stock",filters:[{id:"instock",filterType:"range",state:"8",filterAttrs:{min:"0",step:"1",max:"12",valueFrom:"0",valueTo:"12"}}]},{filtersGroupName:"Brand",filters:[{id:"brand-huawei",filterType:"checkbox",state:"off",filterAttrs:{name:"huawei"}},{id:"brand-lenovo",filterType:"checkbox",state:"off",filterAttrs:{name:"lenovo"}},{id:"brand-xiaomi",filterType:"checkbox",state:"off",filterAttrs:{name:"xiaomi"}}]},{filtersGroupName:"Color",filters:[{id:"color-red",filterType:"checkbox",state:"off",filterAttrs:{name:"color-red"}},{id:"color-black",filterType:"checkbox",state:"off",filterAttrs:{name:"color-black"}},{id:"color-blue",filterType:"checkbox",state:"off",filterAttrs:{name:"color-blue"}},{id:"color-green",filterType:"checkbox",state:"off",filterAttrs:{name:"color-green"}},{id:"color-pink",filterType:"checkbox",state:"off",filterAttrs:{name:"color-pink"}}]},{filtersGroupName:"Band Material",filters:[{id:"bandmaterial-plastic",filterType:"checkbox",state:"off",filterAttrs:{name:"bandmaterial-plastic"}},{id:"bandmaterial-silicone",filterType:"checkbox",state:"off",filterAttrs:{name:"bandmaterial-silicone"}},{id:"bandmaterial-rubber",filterType:"checkbox",state:"off",filterAttrs:{name:"bandmaterial-rubber"}}]}];class A{constructor(){const e=localStorage.getItem("app-filters"),t=JSON.stringify(M);this.filters=JSON.parse(e||t)}saveToLocalStorage(){const e=JSON.stringify(this.filters);localStorage.setItem("app-filters",e)}removeFromLocalStorage(){const e=JSON.stringify(M);localStorage.setItem("app-filters",e)}}class L{constructor(){this.filtersHTML=document.createElement("div"),this.filtersControls=document.createElement("div"),this.resetButton=document.createElement("button")}render(e){return this.filtersHTML.classList.add("filters"),this.filtersControls.classList.add("filters__controls"),e.forEach((e=>{const t=document.createElement("div");t.setAttribute("class","filters__group"),t.innerHTML=`<div class="group__name"> ${e.filtersGroupName} </div>`,e.filters.forEach((r=>{const n=document.createElement("div");switch(r.filterType){case"checkbox":{const e=document.createElement("input");e.setAttribute("type",r.filterType),e.setAttribute("id",r.id);const t=document.createElement("label");t.setAttribute("for",r.id),t.innerHTML=r.id.split("-")[1],Object.keys(r.filterAttrs).forEach((t=>{e.setAttribute(t,r.filterAttrs[t])})),"on"===r.state&&e.setAttribute("checked","checked"),n.append(e,t);break}case"range":{t.innerHTML=`\n                            <div class="group__name"> ${e.filtersGroupName}:\n                                <span class="accented-text">${r.filterAttrs.valueFrom} - ${r.filterAttrs.valueTo}</span>\n                            </div>`,n.setAttribute("class","slider-wrapper"),n.setAttribute("id",`${r.id}`);const a=document.createElement("input"),i=document.createElement("input");a.setAttribute("id",`from-${r.id}`),i.setAttribute("id",`to-${r.id}`),a.setAttribute("value",r.filterAttrs.valueFrom||""),i.setAttribute("value",r.filterAttrs.valueTo||""),a.setAttribute("min",r.filterAttrs.min||""),i.setAttribute("min",r.filterAttrs.min||""),a.setAttribute("max",r.filterAttrs.max||""),i.setAttribute("max",r.filterAttrs.max||""),a.setAttribute("step",r.filterAttrs.step||""),i.setAttribute("step",r.filterAttrs.step||""),a.setAttribute("class","range"),i.setAttribute("class","range"),a.setAttribute("type","range"),i.setAttribute("type","range"),this.fillSliderFromTo(a,i),n.append(a,i);break}}t.append(n)})),this.filtersControls.append(t)})),this.filtersHTML.append(this.filtersControls),this.resetButton.setAttribute("id","reset-filters"),this.resetButton.setAttribute("class","button"),this.resetButton.innerText="Reset Filters",this.filtersHTML.append(this.resetButton),this.listenSliderToDrawMove(),this.filtersHTML}fillSliderFromTo(e,t){const r=Number(e.min),n=Number(e.max)-r,a=Number(e.value)-r,i=Number(t.value)-r;e.style.background=`linear-gradient(\n          to right,\n          #eee 0%,\n          #eee ${a/n*100}%,\n          #000 ${a/n*100}%,\n          #000 ${i/n*100}%,\n          #eee ${i/n*100}%,\n          #eee 100%)`}listenSliderToDrawMove(){this.filtersHTML.querySelectorAll(".slider-wrapper").forEach((e=>e.addEventListener("input",(()=>{const t=e.children[0],r=e.children[1];Number(t.value)>Number(r.value)&&(t.value=r.value),this.fillSliderFromTo(t,r)}))))}listenFilters(e){this.filtersControls.addEventListener("change",(t=>{switch((null==t?void 0:t.target).type){case"checkbox":{const r=t.target.id,n=t.target.value;e(r,n);break}case"range":{const r=t.target.closest(".slider-wrapper");if(r){const t=r.id,n=`${r.children[0].value}-${r.children[1].value}`;this.fillSliderFromTo(r.children[0],r.children[1]),e(t,n)}break}}}))}listenResetFilters(e){this.resetButton.addEventListener("click",(()=>{e()}))}}const S=[{id:"1",name:"Mi Band 2",brand:"xiaomi",color:"black",url:"xiaomi-mi-band-2-black",bandmaterial:"silicone",released:"2016",instock:"12",incart:"no"},{id:"2",name:"Mi Band 2",brand:"xiaomi",color:"blue",url:"xiaomi-mi-band-2-blue",bandmaterial:"silicone",released:"2016",instock:"11",incart:"no"},{id:"3",name:"Mi Band 2",brand:"xiaomi",color:"green",url:"xiaomi-mi-band-2-green",bandmaterial:"silicone",released:"2016",instock:"10",incart:"no"},{id:"4",name:"Mi Band 2",brand:"xiaomi",color:"black",url:"xiaomi-mi-band-2-black",bandmaterial:"plastic",released:"2016",instock:"9",incart:"no"},{id:"5",name:"Mi Band 2",brand:"xiaomi",color:"blue",url:"xiaomi-mi-band-2-blue",bandmaterial:"plastic",released:"2016",instock:"9",incart:"no"},{id:"6",name:"Mi Band 2",brand:"xiaomi",color:"green",url:"xiaomi-mi-band-2-green",bandmaterial:"plastic",released:"2016",instock:"8",incart:"no"},{id:"7",name:"Mi Band 3",brand:"xiaomi",color:"black",url:"xiaomi-mi-band-3-black",bandmaterial:"plastic",released:"2018",instock:"7",incart:"no"},{id:"8",name:"Mi Band 3",brand:"xiaomi",color:"red",url:"xiaomi-mi-band-3-red",bandmaterial:"plastic",released:"2018",instock:"6",incart:"no"},{id:"9",name:"Mi Band 6",brand:"xiaomi",color:"black",url:"XiaomiMiBand6-black",bandmaterial:"plastic",released:"2018",instock:"5",incart:"no"},{id:"10",name:"Mi Band 6",brand:"xiaomi",color:"blue",url:"XiaomiMiBand6-blue",bandmaterial:"plastic",released:"2018",instock:"4",incart:"no"},{id:"11",name:"Mi Band 6",brand:"xiaomi",color:"pink",url:"XiaomiMiBand6-pink",bandmaterial:"plastic",released:"2018",instock:"3",incart:"no"},{id:"12",name:"Mi Band 6",brand:"xiaomi",color:"red",url:"XiaomiMiBand6-red",bandmaterial:"plastic",released:"2018",instock:"2",incart:"no"},{id:"13",name:"Lenovo S2",brand:"lenovo",color:"black",url:"Lenovos2-black",bandmaterial:"rubber",released:"2021",instock:"1",incart:"no"},{id:"14",name:"Band 6",brand:"huawei",color:"red",url:"HuaweiBand6-red",bandmaterial:"silicone",released:"2020",instock:"1",incart:"no"},{id:"15",name:"Band 6",brand:"huawei",color:"pink",url:"HuaweiBand6-pink",bandmaterial:"silicone",released:"2020",instock:"1",incart:"no"},{id:"16",name:"Band 6",brand:"huawei",color:"green",url:"HuaweiBand6-green",bandmaterial:"silicone",released:"2020",instock:"1",incart:"no"},{id:"17",name:"Band 6",brand:"huawei",color:"red",url:"HuaweiBand6-red",bandmaterial:"rubber",released:"2020",instock:"1",incart:"no"},{id:"18",name:"Band 4 Pro",brand:"huawei",color:"black",url:"HUAWEIBand4Pro-black",bandmaterial:"silicone",released:"2019",instock:"1",incart:"no"},{id:"19",name:"Band 4 Pro",brand:"huawei",color:"pink",url:"HUAWEIBand4Pro-pink",bandmaterial:"silicone",released:"2019",instock:"12",incart:"no"},{id:"20",name:"Band 4 Pro",brand:"huawei",color:"pink",url:"HUAWEIBand4Pro-pink",bandmaterial:"rubber",released:"2019",instock:"2",incart:"no"},{id:"21",name:"Band 4 Pro",brand:"huawei",color:"pink",url:"HUAWEIBand4Pro-pink",bandmaterial:"plastic",released:"2019",instock:"1",incart:"no"}];class H{constructor(){this.products=S}}class E{constructor(){this.productsHTML=document.createElement("div")}render(e){this.productsHTML.classList.add("products"),e.length||(this.productsHTML.innerHTML="Sorry, but nothing matched your filter criteria. Please try again"),e.forEach((e=>{const t=document.createElement("div");t.classList.add("product");const r=document.createElement("div");r.setAttribute("class","product__header"),r.innerHTML=`\n                <img src="./images/${e.url}.jpg" class="product__image">\n                <div>\n                    <div class="product__name"> ${e.name} </div>\n\n                    <div > <span class="product__property">Band Material</span> ${e.bandmaterial} </div>\n                    <div > <span class="product__property">Brand</span> ${e.brand} </div>\n                    <div > <span class="product__property">Color</span> ${e.color} </div>\n\n                    <div > <span class="product__property">Released</span> ${e.released} </div>\n                </div>\n            `;const n=document.createElement("div");n.setAttribute("class","product__footer"),"no"===e.incart&&(t.classList.remove("incart"),n.innerHTML=`\n                    <div> ${e.instock} in stock </div>\n                    <button class="button" id="add-${e.id}">Add to Cart</button>\n                `),"yes"===e.incart&&(t.classList.add("incart"),n.innerHTML=`\n                    <div> ${e.instock} in stock </div>\n                    <div class="accented-text"> In cart </div>\n                    <button class="secondary-button" id="remove-${e.id}">Remove from cart</button>\n                `),t.append(r,n),this.productsHTML.append(t)}))}}class B{constructor(){this.options=[{value:"name-a",text:"Name (A-Z)"},{value:"name-z",text:"Name (Z-A)"},{value:"released-new",text:"Year Released (newest first)"},{value:"released-old",text:"Year Released (oldest first)"}],this.sortHTML=document.createElement("div")}renderSorting(e){const t=document.createElement("select");t.setAttribute("class","sort");for(const r of this.options){const n=document.createElement("option");n.setAttribute("value",r.value),n.innerText=r.text,n.value===e&&n.setAttribute("selected","true"),t.append(n)}this.sortHTML.append(t)}listenSort(e){this.sortHTML.addEventListener("change",(t=>{const r=t.target.value;e(r)}))}}class C{constructor(){this.defaultSorting="name-a";const e=localStorage.getItem("app-sort");e?this.sortOrder=JSON.parse(e):(this.sortOrder=this.defaultSorting,localStorage.setItem("app-sort",JSON.stringify(this.sortOrder)))}update(e){localStorage.setItem("app-sort",JSON.stringify(e))}}class N{constructor(){this.searchWord=""}totalReset(){localStorage.clear(),location.reload()}}class _{constructor(){this.searchHTML=document.createElement("div"),this.searchField=document.createElement("input")}renderSearch(e){e&&(this.searchField.value=e),this.searchField.setAttribute("autofocus","autofocus"),this.searchField.setAttribute("type","search"),this.searchField.setAttribute("autocomplete","off"),this.searchField.setAttribute("placeholder","Search for ..."),this.searchField.setAttribute("class","search"),this.searchHTML.append(this.searchField)}listenSearch(e){this.searchHTML.addEventListener("input",(t=>{const r=t.target.value;e(r)}))}setFocus(){this.searchField.focus()}}class F{constructor(){this.coordY=0,this.totalPageReset=()=>{this.pageModel.totalReset()},this.pageModel=new N,this.renderAppPage()}renderAppPage(){this.saveScroll();const e=new w(new A,new L,R),t=new y(new H,new E),r=new g(new T,new k,R),n=new x(new C,new B,this),a=new v(this.pageModel.searchWord,this.pageModel,new _,this),i=a.searchHTML,o=e.filtersHTML,s=r.cartHTML,c=n.sortHTML,l=t.arrangeProducts(e.filters,t.products,r.inCart,n.sortOrder,this.pageModel.searchWord),d=t.getHTML(l),u=new b;u.renderWholePage(o,d,s,i,c),r.addCartListeners(),a.setFocus(),u.listenTotalReset(this.totalPageReset),this.getScroll()}saveScroll(){this.coordY=window.scrollY}getScroll(){window.scroll(0,this.coordY)}}function R(){new F}R(),console.log("\n\nfor students cross-check\n\nTask:\nhttps://github.com/rolling-scopes-school/tasks/tree/master/tasks/online-store\n\n\nScore: 220/220\n\n-[x] Главная страница содержит все товары магазина а также фильтры, строку поиска, поле для сортировки.\n-[x] Выполняются требования к вёрстке +10\n-[x] Карточка товара содержит его изображение, название, количество данного товара на складе, год выхода на рынок, цвет, производитель и т.д., находится ли товар в корзине +10\n-[x] Добавление товаров в корзину +20\n-[x] Сортировка +20\n-[x] Фильтры в указанном диапазоне от и до +30\n-[x] Фильтры по значению +30\n-[x] Можно отфильтровать товары по нескольким фильтрам разного типа +20\n-[x] Сброс фильтров +20\n-[x] Сохранение настроек в local storage +30\n-[x] Поиск +30\n")})()})();