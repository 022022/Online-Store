(()=>{"use strict";var t={524:(t,e,n)=>{n.d(e,{Z:()=>u});var r=n(81),a=n.n(r),i=n(645),s=n.n(i),o=n(667),c=n.n(o),l=new URL(n(350),n.b),d=s()(a()),p=c()(l);d.push([t.id,"html {\n    font-size: 10px;\n    color:rgb(42, 42, 42);\n}\n\nbody {\n    background: rgb(249, 249, 253);\n}\n\n.logo {\n    width: 100px;\n    height: 37px;\n    background-image: url("+p+');\n    background-repeat: no-repeat;\n}\n\nfooter {\n    height: 10em;\n    margin-top: 3em;\n    display: flex;\n    align-items: center;\n    flex-wrap: wrap;\n    justify-content: space-around;\n}\nfooter .copyright {\n    font-size: 14px;\n    color: #333;\n    text-align: center;\n}\nfooter .copyright a {\n    color: #444;\n}\nfooter .copyright a:hover {\n    color: #555;\n}\nfooter .copyright:before {\n    content: \'©\';\n}\n\n\n.products {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 2rem;\n    font-size: 1.8rem;\n    line-height: 130%;\n    align-content: flex-start;\n\n    grid-area: products;\n}\n\n.product {\n    width: 33rem;\n    border: #eee 1px solid;\n    padding: 1.5rem 2rem;\n    box-shadow: 1px 0px 10px -5px rgb(34 60 80 / 20%);\n    background-color: #fff;\n}\n\n.product__image {\n    width: 150px;\n}\n\n.product__price {\n  color: #3a7e52;\n  font-weight: normal;\n  font-size: 1.8rem;\n}\n\n.product__property {\n    color: rgb(130, 130, 130);\n}\n\n.product__name {\n    color:rgb(24, 35, 51);\n    font-weight: bold;\n    padding-bottom: 1rem;\n    font-size: 2rem;\n    display: flex;\n    justify-content: space-between;\n}\n\n.product__header {\n    display: flex;\n    gap: 1rem;\n}\n\n.product__footer {\n  display: flex;\n  justify-content: space-between;\n\n}\n\n.product__footer {\n    padding-top: 1rem;\n    align-items: center;\n}\n\n.button {\n    outline: none;\n    border-radius: 500px;\n    transition-property: background-color, color;\n    transition-duration: .3s;\n    border: 1px solid transparent;\n    text-transform: uppercase;\n    text-align: center;\n    padding: 1.1rem 3rem 1rem;\n    color: #3a7e52;\n    box-shadow: inset 0 0 0 1px #3a7e52;\n    background-color: transparent;\n    max-height: 4.2rem;\n}\n\n.button:hover {\n    color: #fff;\n    background-color: #3a7e52;\n}\n\n\n.secondary-button {\n    outline: none;\n    border-radius: 500px;\n    transition-property: background-color, color;\n    transition-duration: .3s;\n    border: 1px solid transparent;\n    text-align: center;\n    padding: 1.1rem 2rem 1rem;\n    color: #494949;\n    box-shadow: inset 0 0 0 1px #86afad;\n    background-color: transparent;\n    font-size: 1.4rem;\n    max-height: 4.2rem;\n}\n\n.secondary-button:hover {\n    color: #fff;\n    background-color: #86afad;\n}\n\n\n.secondary-button-sm {\n  padding: 0.6rem 1rem 0.5rem;\n  font-size: 1.4rem;\n}\n\nmain {\n    display: grid;\n    grid-template-areas: "filters actions"\n                        "filters  products";\n    grid-template-columns: 20rem 1fr;\n    grid-template-rows: 10rem;\n    column-gap: 7rem;\n    row-gap: 2rem;\n}\n\n.filters, .filters__controls {\n    padding: 2rem;\n    display: flex;\n    flex-direction: column;\n    gap: 3rem;\n    font-size: 1.6rem;\n    min-width: 20rem;\n\n    grid-area: filters;\n}\n\n.group__name {\n    margin-bottom: 1rem;\n    font-weight: bold;\n}\n\nheader {\n    display: flex;\n    justify-content: space-between;\n    padding: 1rem;\n    margin-bottom: 2rem;\n    border-bottom: 2px solid #c1d8c9;\n    align-items: center;\n\n    position: sticky;\n    top: 0px;\n    background: rgb(249, 249, 253);\n    z-index: 100;\n}\n\nh1 {\n    color: #3a7e52;\n    text-transform: uppercase;\n    letter-spacing: 0.1rem;\n}\n\n.slider-wrapper {\n    position: relative;\n}\n\n.range {\n    position: absolute;\n\n    appearance: none;\n    pointer-events: none;\n    background: transparent;\n    border: 1px solid #3a7e52;\n    border-radius: 8px;\n    height: 6px;\n    width: 100%;\n}\n\n.range::-webkit-slider-thumb {\n    -webkit-appearance: none;\n    pointer-events: all;\n    width: 16px;\n    height: 16px;\n    background-color: #3a7e52;\n    border-radius: 50%;\n    cursor: pointer;\n}\n\n.accented-text, a {\n    font-weight: normal;\n    color:#3c8f5a;\n}\n\nlabel {\n    text-transform: capitalize;\n}\n\ninput, label, button {\n    cursor: pointer;\n}\n\n.incart {\n    outline: medium dashed #3c8f5a;\n\n}\n\n.pop-up {\n    display: none;\n    background-color: rgb(255, 246, 201);\n    position: absolute;\n    top: 6rem;\n    right: 1rem;\n    padding: 1rem 2rem;\n    border-radius: 5px;\n    border: 2px solid #d6a02d;\n    box-shadow: 3px 3px 10px rgb(51 63 56 / 27%);\n    font-size: 1.8rem;\n    cursor: pointer;\n    width: 35rem;\n}\n\n@keyframes warning-on {\n    0% {opacity: 0;}\n    100% {opacity: 1;}\n}\n\n.cart {\n    font-size: 1.8rem;\n    color:#3c8f5a;\n}\n\n.actions {\n    grid-area: actions;\n    display: flex;\n    flex-wrap: wrap;\n    gap: 2rem;\n}\n\n.search-message {\n    min-height: 2rem;\n    font-size: 1.8rem;\n    padding: 1rem 0;\n}\n\n.search, .sort {\n    width: 20rem;\n    border: 1px solid #3a7e52;\n    padding: 1rem;\n    height: 4rem;\n    border-radius: 0.5rem;\n    outline: none;\n    color: #3a7e52;\n}\n\n\n/* cart panel */\n\n.cart-panel__overlay {\n  position: fixed;\n  left: 0;\n  top: 0;\n  width: 100vw;\n  height: 100vh;\n  z-index: 100;\n  background-color: #000000b3;\n\n  animation-name: overlay;\n  animation-duration: .3s;\n}\n\n.cart-panel__content {\n  position: fixed;\n  right: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 200;\n  background: rgb(255, 255, 255);\n  overflow: auto;\n  transform: translate(0);\n\n  animation-name: panel;\n  animation-duration: .3s;\n  animation-timing-function: ease-out;\n\n  padding: 20px;\n  box-sizing: border-box;\n  display: grid;\n  gap: 2rem;\n  align-items: start;\n  justify-content: center;\n  justify-items: center;\n  font-size: 1.4rem;\n}\n\n\n@media (min-width: 768px) {\n  .cart-panel__content {\n    width: 500px;\n  }\n}\n\n.cart-panel__product {\n  display: grid;\n  grid-template-columns: 50px 1fr 1fr 40px auto;\n  align-items: center;\n  min-width: 340px;\n  gap: 10px;\n}\n\n.cart-panel__image {\n  width: 50px;\n}\n\n@keyframes overlay {\n  from {background-color: #00000000;}\n  to {background-color: #000000b3;}\n}\n\n@keyframes panel {\n  from {transform: translate(100%);}\n  to {transform: translate(0);}\n}\n\n\n.cart-panel__close {\n  animation-name: close-overlay;\n}\n\n@keyframes close-overlay {\n  from { background-color: #000000b3;}\n  to { background-color: #00000000;}\n}\n\n.cart-panel__close .cart-panel__content{\n  animation-name: close-panel;\n}\n\n@keyframes close-panel {\n  from {transform: translate(0);}\n  to {transform: translate(100%);}\n}\n\n\n.cart-panel__total {\n  font-size: 2.5rem;\n  font-weight: bold;\n  letter-spacing: 0.2rem;\n  border-top: medium dashed #3c8f5a;\n  padding: 1rem 0;\n  border-bottom: medium dashed #3c8f5a;\n}',""]);const u=d},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,a,i){"string"==typeof t&&(t=[[null,t,void 0]]);var s={};if(r)for(var o=0;o<this.length;o++){var c=this[o][0];null!=c&&(s[c]=!0)}for(var l=0;l<t.length;l++){var d=[].concat(t[l]);r&&s[d[0]]||(void 0!==i&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=i),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),a&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=a):d[4]="".concat(a)),e.push(d))}},e}},667:t=>{t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},81:t=>{t.exports=function(t){return t[1]}},379:t=>{var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var i={},s=[],o=0;o<t.length;o++){var c=t[o],l=r.base?c[0]+r.base:c[0],d=i[l]||0,p="".concat(l," ").concat(d);i[l]=d+1;var u=n(p),m={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==u)e[u].references++,e[u].updater(m);else{var h=a(m,r);r.byIndex=o,e.splice(o,0,{identifier:p,updater:h,references:1})}s.push(p)}return s}function a(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,a){var i=r(t=t||[],a=a||{});return function(t){t=t||[];for(var s=0;s<i.length;s++){var o=n(i[s]);e[o].references--}for(var c=r(t,a),l=0;l<i.length;l++){var d=n(i[l]);0===e[d].references&&(e[d].updater(),e.splice(d,1))}i=c}}},569:t=>{var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},795:t=>{t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var a=void 0!==n.layer;a&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,a&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},350:(t,e,n)=>{t.exports=n.p+"ad178c0df28bc133be34.svg"}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var i=e[r]={id:r,exports:{}};return t[r](i,i.exports,n),i.exports}n.m=t,n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var r=e.getElementsByTagName("script");r.length&&(t=r[r.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t})(),n.b=document.baseURI||self.location.href,n.nc=void 0;var r={};(()=>{n.d(r,{l:()=>I});var t=n(379),e=n.n(t),a=n(795),i=n.n(a),s=n(569),o=n.n(s),c=n(565),l=n.n(c),d=n(216),p=n.n(d),u=n(589),m=n.n(u),h=n(524),f={};f.styleTagTransform=m(),f.setAttributes=l(),f.insert=o().bind(null,"head"),f.domAPI=i(),f.insertStyleElement=p(),e()(h.Z,f),h.Z&&h.Z.locals&&h.Z.locals;class b{constructor(){this.appName="Smart Bands Store",this.totalResetButton=document.createElement("button"),this.totalResetButton.setAttribute("class","button"),this.totalResetButton.setAttribute("id","total-reset"),this.totalResetButton.innerText="Total Reset",this.footer='\n\n        <div class="copyright">2022</div>\n            <a href="https://rs.school/js/"> <div class="logo"></div></a>\n            <a href="https://github.com/022022">My GitHub</a>\n\n    '}renderWholePage(t,e,n,r,a,i){document.querySelector("body").innerHTML="";const s=document.createElement("header");s.innerHTML=`<h1> ${this.appName} </h1>`,s.append(n),s.append(i);const o=document.createElement("footer");o.innerHTML=this.footer;const c=document.createElement("div");c.setAttribute("class","actions"),c.append(r),c.append(a),c.append(this.totalResetButton);const l=document.createElement("main");l.append(t,c,e),document.body.append(s,l,o)}listenTotalReset(t){this.totalResetButton.addEventListener("click",(()=>t()))}}class g{constructor(t,e,n){this.handleCart=t=>{const[e,n]=t.split("-");"add"===e&&(this.cartQuantity<20?(this.cartModel.addToCart(n),this.newRender()):this.cartView.showModal()),"remove"===e&&(this.cartModel.removeFromCart(n),this.newRender())},this.cartModel=t,this.cartQuantity=this.cartModel.quantity,this.inCart=this.cartModel.inCart,this.cartView=e,this.cartHTML=this.cartView.cartHTML,this.cartView.createCart(this.cartQuantity),this.app=n}addCartListeners(){this.cartView.listenAddToCart(this.handleCart)}newRender(){this.app()}}class v{constructor(t,e,n,r){this.handleSearch=t=>{this.pageModel.searchWord=t.toLowerCase(),this.pageController.renderAppPage()},this.pageModel=e,this.pageController=r,this.searchView=n,this.searchView.renderSearch(t),this.searchHTML=this.searchView.searchHTML,this.searchView.listenSearch(this.handleSearch)}setFocus(){this.searchView.setFocus()}}class y{constructor(t,e,n){this.handleSort=t=>{this.sortModel.update(t),this.pageController.renderAppPage()},this.sortModel=t,this.sortOrder=this.sortModel.sortOrder,this.sortView=e,this.sortView.renderSorting(this.sortOrder),this.sortHTML=this.sortView.sortHTML,this.sortView.listenSort(this.handleSort),this.pageController=n}}class x{constructor(t,e,n){this.handleFilters=(t,e)=>{for(const n of this.filters)for(const r of n.filters)if(r.id===t)switch(r.filterType){case"checkbox":"off"===r.state?r.state="on":r.state="off";break;case"range":[r.filterAttrs.valueFrom,r.filterAttrs.valueTo]=e.split("-")}this.filtersModel.filters=this.filters,this.filtersModel.saveToLocalStorage(),this.newRender()},this.resetFilters=()=>{this.filtersModel.removeFromLocalStorage(),this.newRender()},this.filtersModel=t,this.filtersView=e,this.app=n,this.filters=this.filtersModel.filters,this.filtersHTML=this.filtersView.render(this.filters),this.filtersView.listenFilters(this.handleFilters),this.filtersView.listenResetFilters(this.resetFilters)}newRender(){this.app()}}class w{constructor(t,e){this.productsModel=t,this.products=this.productsModel.products,this.productsView=e}arrangeProducts(t,e,n,r,a){const i=[],s=[];for(const e of t){const t=[];for(const n of e.filters)switch(n.filterType){case"checkbox":if("on"===n.state){const[e,r]=n.id.split("-"),a={[e.toLowerCase()]:r.toLowerCase()};t.push(a)}break;case"range":s.push([n.id,n.filterAttrs.valueFrom,n.filterAttrs.valueTo])}i.push(t)}let o=e;for(const t of i){if(0===t.length)continue;const e=o.filter((e=>{for(const n of t)if(e[Object.keys(n)[0]]===Object.values(n)[0])return!0}));o=e}let c=o;for(const t of s){const e=c.filter((e=>{const[n,r,a]=t;if(n){const t=Number(e[n]);if(t>=Number(r)&&t<=Number(a))return!0}}));c=e}if(c.forEach((t=>{n.includes(t.id)?t.incart="yes":t.incart="no"})),a){const t=c.filter((t=>t.name.toLowerCase().includes(a)));c=t}switch(r){case"name-a":c.sort(((t,e)=>t.name<e.name?-1:t.name>e.name?1:0));break;case"name-z":c.sort(((t,e)=>e.name<t.name?-1:e.name>t.name?1:0));break;case"released-new":c.sort(((t,e)=>Number(e.released)-Number(t.released)));break;case"released-old":c.sort(((t,e)=>Number(t.released)-Number(e.released)))}return c}getHTML(t){return this.productsView.render(t),this.productsView.productsHTML}}class k{constructor(){this.cartHTML=document.createElement("div"),this.warning=document.createElement("div")}createCart(t){this.cartHTML.setAttribute("class","cart");const e=document.createElement("div");e.setAttribute("class","cart-stats"),e.innerHTML=`${t}`,this.warning.setAttribute("class","pop-up"),this.warning.innerHTML="Sorry, you have added maximum (20 products). Click to close",this.cartHTML.append(this.warning)}listenAddToCart(t){const e=document.querySelector(".products");e&&e.addEventListener("click",(e=>{if("BUTTON"===e.target.tagName){const n=e.target.id;t(n)}}))}showModal(){this.warning.style.display="block",this.warning.style.animation="warning-on 0.5s",this.warning.addEventListener("click",(()=>this.warning.style.display="none"))}}class T{constructor(){const t=localStorage.getItem("app-cart"),e=localStorage.getItem("app-cart-quantity");t?(this.inCart=JSON.parse(t),this.quantity=this.inCart.length):(this.quantity=0,this.inCart=[],localStorage.setItem("app-cart",JSON.stringify(this.inCart))),e?this.savedCartQuantity=JSON.parse(e):(this.savedCartQuantity={},localStorage.setItem("app-cart-quantity",JSON.stringify(this.savedCartQuantity)))}addToCart(t){const e=localStorage.getItem("app-cart"),n=localStorage.getItem("app-cart-quantity");if(e){const n=JSON.parse(e);n.push(t),localStorage.setItem("app-cart",JSON.stringify(n))}if(n){const e=JSON.parse(n);e[t]=1,localStorage.setItem("app-cart-quantity",JSON.stringify(e))}}removeFromCart(t){const e=localStorage.getItem("app-cart"),n=localStorage.getItem("app-cart-quantity");if(e){const n=JSON.parse(e).filter((e=>e!==t));localStorage.setItem("app-cart",JSON.stringify(n))}if(n){const e=JSON.parse(n);delete e[t],localStorage.setItem("app-cart-quantity",JSON.stringify(e))}}}const S=[{filtersGroupName:"Price",filters:[{filterType:"range",id:"price",state:"10",filterAttrs:{min:"2",step:"1",max:"40",valueFrom:"2",valueTo:"40"}}]},{filtersGroupName:"Released",filters:[{filterType:"range",id:"released",state:"2021",filterAttrs:{min:"2016",step:"1",max:"2021",valueFrom:"2016",valueTo:"2021"}}]},{filtersGroupName:"In Stock",filters:[{id:"instock",filterType:"range",state:"8",filterAttrs:{min:"0",step:"1",max:"12",valueFrom:"0",valueTo:"12"}}]},{filtersGroupName:"Brand",filters:[{id:"brand-huawei",filterType:"checkbox",state:"off",filterAttrs:{name:"huawei"}},{id:"brand-lenovo",filterType:"checkbox",state:"off",filterAttrs:{name:"lenovo"}},{id:"brand-xiaomi",filterType:"checkbox",state:"off",filterAttrs:{name:"xiaomi"}}]},{filtersGroupName:"Color",filters:[{id:"color-red",filterType:"checkbox",state:"off",filterAttrs:{name:"color-red"}},{id:"color-black",filterType:"checkbox",state:"off",filterAttrs:{name:"color-black"}},{id:"color-blue",filterType:"checkbox",state:"off",filterAttrs:{name:"color-blue"}},{id:"color-green",filterType:"checkbox",state:"off",filterAttrs:{name:"color-green"}},{id:"color-pink",filterType:"checkbox",state:"off",filterAttrs:{name:"color-pink"}}]},{filtersGroupName:"Band Material",filters:[{id:"bandmaterial-plastic",filterType:"checkbox",state:"off",filterAttrs:{name:"bandmaterial-plastic"}},{id:"bandmaterial-silicone",filterType:"checkbox",state:"off",filterAttrs:{name:"bandmaterial-silicone"}},{id:"bandmaterial-rubber",filterType:"checkbox",state:"off",filterAttrs:{name:"bandmaterial-rubber"}}]}];class M{constructor(){const t=localStorage.getItem("app-filters"),e=JSON.stringify(S);this.filters=JSON.parse(t||e)}saveToLocalStorage(){const t=JSON.stringify(this.filters);localStorage.setItem("app-filters",t)}removeFromLocalStorage(){const t=JSON.stringify(S);localStorage.setItem("app-filters",t)}}class A{constructor(){this.filtersHTML=document.createElement("div"),this.filtersControls=document.createElement("div"),this.resetButton=document.createElement("button")}render(t){return this.filtersHTML.classList.add("filters"),this.filtersControls.classList.add("filters__controls"),t.forEach((t=>{const e=document.createElement("div");e.setAttribute("class","filters__group"),e.innerHTML=`<div class="group__name"> ${t.filtersGroupName} </div>`,t.filters.forEach((n=>{const r=document.createElement("div");switch(n.filterType){case"checkbox":{const t=document.createElement("input");t.setAttribute("type",n.filterType),t.setAttribute("id",n.id);const e=document.createElement("label");e.setAttribute("for",n.id),e.innerHTML=n.id.split("-")[1],Object.keys(n.filterAttrs).forEach((e=>{t.setAttribute(e,n.filterAttrs[e])})),"on"===n.state&&t.setAttribute("checked","checked"),r.append(t,e);break}case"range":{e.innerHTML=`\n                            <div class="group__name"> ${t.filtersGroupName}:\n                                <span class="accented-text">${n.filterAttrs.valueFrom} - ${n.filterAttrs.valueTo}</span>\n                            </div>`,r.setAttribute("class","slider-wrapper"),r.setAttribute("id",`${n.id}`);const a=document.createElement("input"),i=document.createElement("input");a.setAttribute("id",`from-${n.id}`),i.setAttribute("id",`to-${n.id}`),a.setAttribute("value",n.filterAttrs.valueFrom||""),i.setAttribute("value",n.filterAttrs.valueTo||""),a.setAttribute("min",n.filterAttrs.min||""),i.setAttribute("min",n.filterAttrs.min||""),a.setAttribute("max",n.filterAttrs.max||""),i.setAttribute("max",n.filterAttrs.max||""),a.setAttribute("step",n.filterAttrs.step||""),i.setAttribute("step",n.filterAttrs.step||""),a.setAttribute("class","range"),i.setAttribute("class","range"),a.setAttribute("type","range"),i.setAttribute("type","range"),this.fillSliderFromTo(a,i),r.append(a,i);break}}e.append(r)})),this.filtersControls.append(e)})),this.filtersHTML.append(this.filtersControls),this.resetButton.setAttribute("id","reset-filters"),this.resetButton.setAttribute("class","button"),this.resetButton.innerText="Reset Filters",this.filtersHTML.append(this.resetButton),this.listenSliderToDrawMove(),this.filtersHTML}fillSliderFromTo(t,e){const n=Number(t.min),r=Number(t.max)-n,a=Number(t.value)-n,i=Number(e.value)-n;t.style.background=`linear-gradient(\n          to right,\n          #eee 0%,\n          #eee ${a/r*100}%,\n          #000 ${a/r*100}%,\n          #000 ${i/r*100}%,\n          #eee ${i/r*100}%,\n          #eee 100%)`}listenSliderToDrawMove(){this.filtersHTML.querySelectorAll(".slider-wrapper").forEach((t=>t.addEventListener("input",(()=>{const e=t.children[0],n=t.children[1];Number(e.value)>Number(n.value)&&(e.value=n.value),this.fillSliderFromTo(e,n)}))))}listenFilters(t){this.filtersControls.addEventListener("change",(e=>{switch((null==e?void 0:e.target).type){case"checkbox":{const n=e.target.id,r=e.target.value;t(n,r);break}case"range":{const n=e.target.closest(".slider-wrapper");if(n){const e=n.id,r=`${n.children[0].value}-${n.children[1].value}`;this.fillSliderFromTo(n.children[0],n.children[1]),t(e,r)}break}}}))}listenResetFilters(t){this.resetButton.addEventListener("click",(()=>{t()}))}}const L=[{id:"1",price:"12.38",name:"Mi Band 2",brand:"xiaomi",color:"black",url:"xiaomi-mi-band-2-black",bandmaterial:"silicone",released:"2016",instock:"12",incart:"no"},{id:"2",price:"8.08",name:"Mi Band 2",brand:"xiaomi",color:"blue",url:"xiaomi-mi-band-2-blue",bandmaterial:"silicone",released:"2016",instock:"11",incart:"no"},{id:"3",price:"10.66",name:"Mi Band 2",brand:"xiaomi",color:"green",url:"xiaomi-mi-band-2-green",bandmaterial:"silicone",released:"2016",instock:"10",incart:"no"},{id:"4",price:"10.66",name:"Mi Band 2",brand:"xiaomi",color:"black",url:"xiaomi-mi-band-2-black",bandmaterial:"plastic",released:"2016",instock:"9",incart:"no"},{id:"5",price:"10.66",name:"Mi Band 2",brand:"xiaomi",color:"blue",url:"xiaomi-mi-band-2-blue",bandmaterial:"plastic",released:"2016",instock:"9",incart:"no"},{id:"6",price:"10.66",name:"Mi Band 2",brand:"xiaomi",color:"green",url:"xiaomi-mi-band-2-green",bandmaterial:"plastic",released:"2016",instock:"8",incart:"no"},{id:"7",price:"10.66",name:"Mi Band 3",brand:"xiaomi",color:"black",url:"xiaomi-mi-band-3-black",bandmaterial:"plastic",released:"2018",instock:"7",incart:"no"},{id:"8",price:"10.66",name:"Mi Band 3",brand:"xiaomi",color:"red",url:"xiaomi-mi-band-3-red",bandmaterial:"plastic",released:"2018",instock:"6",incart:"no"},{id:"9",price:"10.66",name:"Mi Band 6",brand:"xiaomi",color:"black",url:"XiaomiMiBand6-black",bandmaterial:"plastic",released:"2018",instock:"5",incart:"no"},{id:"10",price:"10.66",name:"Mi Band 6",brand:"xiaomi",color:"blue",url:"XiaomiMiBand6-blue",bandmaterial:"plastic",released:"2018",instock:"4",incart:"no"},{id:"11",price:"10.66",name:"Mi Band 6",brand:"xiaomi",color:"pink",url:"XiaomiMiBand6-pink",bandmaterial:"plastic",released:"2018",instock:"3",incart:"no"},{id:"12",price:"10.66",name:"Mi Band 6",brand:"xiaomi",color:"red",url:"XiaomiMiBand6-red",bandmaterial:"plastic",released:"2018",instock:"2",incart:"no"},{id:"13",price:"30.08",name:"Lenovo S2",brand:"lenovo",color:"black",url:"Lenovos2-black",bandmaterial:"rubber",released:"2021",instock:"1",incart:"no"},{id:"14",price:"10.66",name:"Band 6",brand:"huawei",color:"red",url:"HuaweiBand6-red",bandmaterial:"silicone",released:"2020",instock:"1",incart:"no"},{id:"15",price:"10.66",name:"Band 6",brand:"huawei",color:"pink",url:"HuaweiBand6-pink",bandmaterial:"silicone",released:"2020",instock:"1",incart:"no"},{id:"16",price:"10.66",name:"Band 6",brand:"huawei",color:"green",url:"HuaweiBand6-green",bandmaterial:"silicone",released:"2020",instock:"1",incart:"no"},{id:"17",price:"10.66",name:"Band 6",brand:"huawei",color:"red",url:"HuaweiBand6-red",bandmaterial:"rubber",released:"2020",instock:"1",incart:"no"},{id:"18",price:"10.66",name:"Band 4 Pro",brand:"huawei",color:"black",url:"HUAWEIBand4Pro-black",bandmaterial:"silicone",released:"2019",instock:"1",incart:"no"},{id:"19",price:"10.66",name:"Band 4 Pro",brand:"huawei",color:"pink",url:"HUAWEIBand4Pro-pink",bandmaterial:"silicone",released:"2019",instock:"12",incart:"no"},{id:"20",price:"10.66",name:"Band 4 Pro",brand:"huawei",color:"pink",url:"HUAWEIBand4Pro-pink",bandmaterial:"rubber",released:"2019",instock:"2",incart:"no"},{id:"21",price:"10.66",name:"Band 4 Pro",brand:"huawei",color:"pink",url:"HUAWEIBand4Pro-pink",bandmaterial:"plastic",released:"2019",instock:"1",incart:"no"}];class _{constructor(){this.products=L}}class C{constructor(){this.productsHTML=document.createElement("div")}render(t){this.productsHTML.classList.add("products"),t.length||(this.productsHTML.innerHTML="Sorry, but nothing matched your filter criteria. Please try again"),t.forEach((t=>{const e=document.createElement("div");e.classList.add("product");const n=document.createElement("div");n.setAttribute("class","product__header"),n.innerHTML=`\n                <img src="./images/${t.url}.jpg" class="product__image">\n                <div>\n                    <div class="product__name"> ${t.name} <span class="product__price">   $${t.price} </span></div>\n\n\n                    <div > <span class="product__property">Band Material</span> ${t.bandmaterial} </div>\n                    <div > <span class="product__property">Brand</span> ${t.brand} </div>\n                    <div > <span class="product__property">Color</span> ${t.color} </div>\n\n                    <div > <span class="product__property">Released</span> ${t.released} </div>\n                </div>\n            `;const r=document.createElement("div");r.setAttribute("class","product__footer"),"no"===t.incart&&(e.classList.remove("incart"),r.innerHTML=`\n                    <div> ${t.instock} in stock </div>\n                    <button class="button" id="add-${t.id}">Add to Cart</button>\n                `),"yes"===t.incart&&(e.classList.add("incart"),r.innerHTML=`\n                    <div> ${t.instock} in stock </div>\n                    <div class="accented-text"> In cart </div>\n                    <button class="secondary-button" id="remove-${t.id}">Remove from cart</button>\n                `),e.append(n,r),this.productsHTML.append(e)}))}}class N{constructor(){this.options=[{value:"name-a",text:"Name (A-Z)"},{value:"name-z",text:"Name (Z-A)"},{value:"released-new",text:"Year Released (newest first)"},{value:"released-old",text:"Year Released (oldest first)"}],this.sortHTML=document.createElement("div")}renderSorting(t){const e=document.createElement("select");e.setAttribute("class","sort");for(const n of this.options){const r=document.createElement("option");r.setAttribute("value",n.value),r.innerText=n.text,r.value===t&&r.setAttribute("selected","true"),e.append(r)}this.sortHTML.append(e)}listenSort(t){this.sortHTML.addEventListener("change",(e=>{const n=e.target.value;t(n)}))}}class E{constructor(){this.defaultSorting="name-a";const t=localStorage.getItem("app-sort");t?this.sortOrder=JSON.parse(t):(this.sortOrder=this.defaultSorting,localStorage.setItem("app-sort",JSON.stringify(this.sortOrder)))}update(t){localStorage.setItem("app-sort",JSON.stringify(t))}}class H{constructor(){this.searchWord=""}totalReset(){localStorage.clear(),location.reload()}}class B{constructor(){this.searchHTML=document.createElement("div"),this.searchField=document.createElement("input")}renderSearch(t){t&&(this.searchField.value=t),this.searchField.setAttribute("autofocus","autofocus"),this.searchField.setAttribute("type","search"),this.searchField.setAttribute("autocomplete","off"),this.searchField.setAttribute("placeholder","Search for ..."),this.searchField.setAttribute("class","search"),this.searchHTML.append(this.searchField)}listenSearch(t){this.searchHTML.addEventListener("input",(e=>{const n=e.target.value;t(n)}))}setFocus(){this.searchField.focus()}}function P(t="div",e){const n=document.createElement(t);if(e.attributes)for(const t in e.attributes)n.setAttribute(t,e.attributes[t]);return e.classes&&(n.className=e.classes),e.text&&(n.textContent=e.text),n}class O{constructor(t){this.openCartPanel=()=>{this.cartPanelOverlay=P("div",{classes:"cart-panel__overlay"}),this.cartPanelHTML=P("div",{classes:"cart-panel__content"}),this.setUpCartPanel(),this.cartPanelOverlay.append(this.cartPanelHTML),document.body.append(this.cartPanelOverlay),this.cartPanelBtn.removeEventListener("click",this.openCartPanel),document.body.style.overflow="hidden"},this.closeCartPanel=()=>{const t=document.querySelector(".cart-panel__overlay");null==t||t.classList.add("cart-panel__close"),document.body.style.overflow="auto";const e=this.inCart.filter((t=>!this.toBeRemoved.includes(t)));localStorage.setItem("app-cart",JSON.stringify(e)),null==t||t.addEventListener("animationend",(()=>this.app()))},this.wrapProduct=t=>{const e=Number(t.quantity),n=Number(t.quantity)*Number(t.price),r=P("div",{classes:"cart-panel__product"}),a=P("img",{attributes:{src:`./images/${t.url}.jpg`},classes:"cart-panel__image"}),i=P("h3",{text:t.name}),s=P("p",{text:t.price}),o=P("input",{attributes:{type:"number",min:"1",max:t.instock,id:t.id,value:String(t.quantity)}});o.addEventListener("click",(t=>{this.updateQuantity((null==t?void 0:t.target).id,Number((null==t?void 0:t.target).value))}));const c=P("button",{attributes:{id:t.id},classes:"secondary-button secondary-button-sm",text:"Remove"});return c.addEventListener("click",(t=>{this.removeProduct((null==t?void 0:t.target).id)})),r.append(a,i,s,o,c),{productWrapper:r,productSum:n,productsNumber:e}},this.setUpCartPanel=()=>{this.cartPanelHTML.innerHTML="";const t=localStorage.getItem("app-cart-quantity");t&&(this.inCartQuantity=JSON.parse(t));const e=P("button",{classes:"secondary-button secondary-button-sm",text:"Close"});e.addEventListener("click",this.closeCartPanel);const n=P("div",{}),r=[];for(const t of L)if(t.id in this.inCartQuantity){const e=Object.assign(Object.assign({},t),{quantity:String(this.inCartQuantity[t.id])});r.push(e)}let a=0,i=0;for(const t of r){const{productWrapper:e,productSum:r,productsNumber:s}=this.wrapProduct(t);n.append(e),a+=r,i+=s}const s=P("div",{classes:"cart-panel__total",text:`$ ${a.toFixed(2)}`}),o=P("div",{});if(this.inCart.length>0){const t=P("button",{classes:"secondary-button secondary-button-sm",text:"Clear cart"});t.addEventListener("click",this.clearCart),o.append(t)}else o.textContent="Nothing in your cart yet";const c=document.createElement("h2");c.textContent=`Your Cart (${i})`,this.cartPanelHTML.append(e,c,n,s,o),this.cartPanelOverlay.addEventListener("click",(t=>{(null==t?void 0:t.target).classList.contains("cart-panel__overlay")&&this.closeCartPanel()}))},this.removeProduct=t=>{this.toBeRemoved.push(t),delete this.inCartQuantity[t],localStorage.setItem("app-cart-quantity",JSON.stringify(this.inCartQuantity)),this.setUpCartPanel()},this.updateQuantity=(t,e)=>{this.inCartQuantity[t]=e,localStorage.setItem("app-cart-quantity",JSON.stringify(this.inCartQuantity)),this.setUpCartPanel()},this.clearCart=()=>{localStorage.setItem("app-cart-quantity",""),this.toBeRemoved.push(...this.inCart),this.inCart=[],this.inCartQuantity={},this.setUpCartPanel()},this.app=t,this.cartPanelBtn=P("button",{classes:"button cart-panel__open",text:"Open Cart"}),this.cartPanelBtn.addEventListener("click",this.openCartPanel);const e=localStorage.getItem("app-cart");e?this.inCart=JSON.parse(e):(this.inCart=[],localStorage.setItem("app-cart",JSON.stringify(this.inCart))),this.toBeRemoved=[],this.inCartQuantity={},this.cartPanelOverlay=P("div",{}),this.cartPanelHTML=P("div",{})}}class F{constructor(){this.coordY=0,this.totalPageReset=()=>{this.pageModel.totalReset()},this.pageModel=new H,this.renderAppPage()}renderAppPage(){this.saveScroll();const t=new x(new M,new A,I),e=new w(new _,new C),n=new g(new T,new k,I),r=new y(new E,new N,this),a=new v(this.pageModel.searchWord,this.pageModel,new B,this),i=new O(I),s=a.searchHTML,o=t.filtersHTML,c=n.cartHTML,l=r.sortHTML,d=i.cartPanelBtn,p=e.arrangeProducts(t.filters,e.products,n.inCart,r.sortOrder,this.pageModel.searchWord),u=e.getHTML(p),m=new b;m.renderWholePage(o,u,c,s,l,d),n.addCartListeners(),a.setFocus(),m.listenTotalReset(this.totalPageReset),this.getScroll()}saveScroll(){this.coordY=window.scrollY}getScroll(){window.scroll(0,this.coordY)}}function I(){new F}I(),console.log("\n\nfor students cross-check\n\nTask:\nhttps://github.com/rolling-scopes-school/tasks/tree/master/tasks/online-store\n\n\nScore: 220/220\n\n-[x] Главная страница содержит все товары магазина а также фильтры, строку поиска, поле для сортировки.\n-[x] Выполняются требования к вёрстке +10\n-[x] Карточка товара содержит его изображение, название, количество данного товара на складе, год выхода на рынок, цвет, производитель и т.д., находится ли товар в корзине +10\n-[x] Добавление товаров в корзину +20\n-[x] Сортировка +20\n-[x] Фильтры в указанном диапазоне от и до +30\n-[x] Фильтры по значению +30\n-[x] Можно отфильтровать товары по нескольким фильтрам разного типа +20\n-[x] Сброс фильтров +20\n-[x] Сохранение настроек в local storage +30\n-[x] Поиск +30\n")})()})();